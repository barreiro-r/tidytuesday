[
  {
    "objectID": "posts/2025-06-17/notebook.html",
    "href": "posts/2025-06-17/notebook.html",
    "title": "API Specs",
    "section": "",
    "text": "Note\n\n\n\n Check data in TidyTuesday GitHub repository.\n\n\nThis week weâ€™re exploring Web APIs! The lead volunteer for TidyTuesday (Jon Harmon) is writing a book about working with Web APIs with R as well as a series of R packages to make it easier to create API-wrapping R packages. On Thursday, 2025-06-19, Jon will present a talk on this package ecosystem at the Ghana R Conference 2025. While working on the packages and the talk, Jon explored a list of APIs from the website APIs.guru. That dataset is provided here.\n\n[APIs.guruâ€™s] goal is to create a machine-readable Wikipedia for Web APIs in the OpenAPI Specification format."
  },
  {
    "objectID": "posts/2025-06-17/notebook.html#about-the-data",
    "href": "posts/2025-06-17/notebook.html#about-the-data",
    "title": "API Specs",
    "section": "",
    "text": "Note\n\n\n\n Check data in TidyTuesday GitHub repository.\n\n\nThis week weâ€™re exploring Web APIs! The lead volunteer for TidyTuesday (Jon Harmon) is writing a book about working with Web APIs with R as well as a series of R packages to make it easier to create API-wrapping R packages. On Thursday, 2025-06-19, Jon will present a talk on this package ecosystem at the Ghana R Conference 2025. While working on the packages and the talk, Jon explored a list of APIs from the website APIs.guru. That dataset is provided here.\n\n[APIs.guruâ€™s] goal is to create a machine-readable Wikipedia for Web APIs in the OpenAPI Specification format."
  },
  {
    "objectID": "posts/2025-06-17/notebook.html#initializing",
    "href": "posts/2025-06-17/notebook.html#initializing",
    "title": "API Specs",
    "section": "1 Initializing",
    "text": "1 Initializing\n\n1.1 Load libraries\n\nlibrary(tidyverse)\nlibrary(glue)\nlibrary(scales)\nlibrary(showtext)\nlibrary(ggtext)\nlibrary(shadowtext)\n\nfont_add_google(\"Ubuntu\", \"Ubuntu\", regular.wt = 400, bold.wt = 700)\nshowtext_auto()\nshowtext_opts(dpi = 300)\n\n\n\n1.2 Set theme\n\nis_the_new_black &lt;- \"#374571\"\ntheme_set(\n  theme_minimal() +\n    theme(\n      # axis.line.x.bottom = element_line(color = '#474747', linewidth = .3),\n      # axis.ticks.x= element_line(color = '#474747', linewidth = .3),\n      # axis.line.y.left = element_line(color = '#474747', linewidth = .3),\n      # axis.ticks.y= element_line(color = '#474747', linewidth = .3),\n      # # panel.grid = element_line(linewidth = .3, color = 'grey90'),\n      panel.grid.major = element_blank(),\n      panel.grid.minor = element_blank(),\n      axis.ticks.length = unit(-0.15, \"cm\"),\n      plot.background = element_blank(),\n      # plot.title.position = \"plot\",\n      plot.title = element_text(family = \"Ubuntu\", size = 18, face = 'bold'),\n      plot.caption = element_text(\n        size = 8,\n        color = '#aebae0',\n        margin = margin(20, 0, 0, 0),\n        hjust = 0\n      ),\n      plot.subtitle = element_text(\n        size = 9,\n        lineheight = 1.15,\n        margin = margin(5, 0, 15, 0)\n      ),\n      axis.title.x = element_markdown(\n        family = \"Ubuntu\",\n        hjust = .5,\n        size = 8,\n        color = \"#374571\"\n      ),\n      axis.title.y = element_markdown(\n        family = \"Ubuntu\",\n        hjust = .5,\n        size = 8,\n        color = \"#374571\"\n      ),\n      axis.text = element_text(\n        family = \"Ubuntu\",\n        hjust = .5,\n        size = 8,\n        color = \"#374571\"\n      ),\n      legend.position = \"top\",\n      text = element_text(family = \"Ubuntu\", color = \"#374571\"),\n      plot.margin = margin(25, 25, 25, 25)\n    )\n)\n\n\n\n1.3 Load this weekâ€™s data\n\napi_categories &lt;-readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/main/data/2025/2025-06-17/api_categories.csv')\napi_info &lt;- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/main/data/2025/2025-06-17/api_info.csv')\napi_logos &lt;- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/main/data/2025/2025-06-17/api_logos.csv')\napi_origins &lt;- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/main/data/2025/2025-06-17/api_origins.csv')\napisguru_apis &lt;- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/main/data/2025/2025-06-17/apisguru_apis.csv')"
  },
  {
    "objectID": "posts/2025-06-17/notebook.html#data-analysis",
    "href": "posts/2025-06-17/notebook.html#data-analysis",
    "title": "API Specs",
    "section": "2 Data analysis",
    "text": "2 Data analysis\n\nHow many API format are there?\n\napi_origins |&gt; distinct(name, .keep_all = TRUE) |&gt; count(format, sort = TRUE)\n\n# A tibble: 7 Ã— 2\n  format           n\n  &lt;chr&gt;        &lt;int&gt;\n1 swagger       1057\n2 openapi        919\n3 &lt;NA&gt;           272\n4 google         258\n5 postman         15\n6 wadl             5\n7 apiBlueprint     3\n\n\nSo many NA, why?\n\napi_origins |&gt; filter(format |&gt; is.na()) |&gt; mutate(is_aws = str_detect(name, 'aws'))\n\n# A tibble: 272 Ã— 5\n   name                                  format url               version is_aws\n   &lt;chr&gt;                                 &lt;chr&gt;  &lt;chr&gt;             &lt;chr&gt;   &lt;lgl&gt; \n 1 amazonaws.com:AWSMigrationHub         &lt;NA&gt;   https://raw.githâ€¦ &lt;NA&gt;    TRUE  \n 2 amazonaws.com:accessanalyzer          &lt;NA&gt;   https://raw.githâ€¦ &lt;NA&gt;    TRUE  \n 3 amazonaws.com:acm                     &lt;NA&gt;   https://raw.githâ€¦ &lt;NA&gt;    TRUE  \n 4 amazonaws.com:acm-pca                 &lt;NA&gt;   https://raw.githâ€¦ &lt;NA&gt;    TRUE  \n 5 amazonaws.com:alexaforbusiness        &lt;NA&gt;   https://raw.githâ€¦ &lt;NA&gt;    TRUE  \n 6 amazonaws.com:amp                     &lt;NA&gt;   https://raw.githâ€¦ &lt;NA&gt;    TRUE  \n 7 amazonaws.com:amplify                 &lt;NA&gt;   https://raw.githâ€¦ &lt;NA&gt;    TRUE  \n 8 amazonaws.com:amplifybackend          &lt;NA&gt;   https://raw.githâ€¦ &lt;NA&gt;    TRUE  \n 9 amazonaws.com:apigateway              &lt;NA&gt;   https://raw.githâ€¦ &lt;NA&gt;    TRUE  \n10 amazonaws.com:apigatewaymanagementapi &lt;NA&gt;   https://raw.githâ€¦ &lt;NA&gt;    TRUE  \n# â„¹ 262 more rows\n\n\nMost of them are AWS. Letâ€™s add it as a format.\n\n\nCount how many categories are there\n\napi_categories |&gt; count(name, sort = TRUE) |&gt; filter(n &gt; 1)\n\n# A tibble: 426 Ã— 2\n   name                                 n\n   &lt;chr&gt;                            &lt;int&gt;\n 1 threatjammer.com                     8\n 2 neutrinoapi.net                      5\n 3 beanstream.com                       3\n 4 edrv.io                              3\n 5 googleapis.com:my-business           3\n 6 slack.com:openai                     3\n 7 spectrocoin.com                      3\n 8 stackexchange.com                    3\n 9 who-hosts-this.com                   3\n10 amentum.space:aviation_radiation     2\n# â„¹ 416 more rows\n\napi_categories |&gt; count(apisguru_category, sort = TRUE)\n\n# A tibble: 42 Ã— 2\n   apisguru_category     n\n   &lt;chr&gt;             &lt;int&gt;\n 1 cloud               955\n 2 media               340\n 3 open_data           318\n 4 analytics           284\n 5 developer_tools     168\n 6 ecommerce            78\n 7 financial            72\n 8 messaging            62\n 9 entertainment        61\n10 telecom              60\n# â„¹ 32 more rows\n\n\nOne name can have multiple categories. In fact, 416 of 2,331 (17%) have more than one category. Letâ€™s let it repeat."
  },
  {
    "objectID": "posts/2025-06-17/notebook.html#transform-data-for-plotting",
    "href": "posts/2025-06-17/notebook.html#transform-data-for-plotting",
    "title": "API Specs",
    "section": "3 Transform Data for Plotting",
    "text": "3 Transform Data for Plotting\n\n3.1 Creating table of authors with most records for each language\n\n# Add AWS format, add Other and remove NA.\napi_origins_mod &lt;-\n  api_origins |&gt;\n  mutate(\n    format = if_else(is.na(format) & str_detect(name, 'aws'), 'aws', format)\n  ) |&gt;\n  mutate(format = fct_lump(format, n = 4)) |&gt;\n  filter(!is.na(format)) |&gt;\n  count(name, format, sort = TRUE)\n\n# Creating \"Other\" category for api_categories\napi_categories_mod &lt;-\n  api_categories |&gt;\n  mutate(apisguru_category = fct_lump(apisguru_category, n = 5)) |&gt;\n  distinct(name, apisguru_category) |&gt;\n  filter(!is.na(apisguru_category))\n\ndata2plot &lt;-\n  api_origins_mod |&gt;\n  left_join(api_categories_mod, by = 'name') |&gt;\n  count(format, apisguru_category) |&gt;\n  filter(!is.na(apisguru_category))"
  },
  {
    "objectID": "posts/2025-06-17/notebook.html#time-to-plot",
    "href": "posts/2025-06-17/notebook.html#time-to-plot",
    "title": "API Specs",
    "section": "4 Time to plot!",
    "text": "4 Time to plot!\n\n4.1 Before\n\ndata2plot |&gt; \n  ggplot(aes(x = n, y = format)) +\n  geom_col(aes(fill = apisguru_category), position = 'stack')\n\n\n\n\n\n\n\n\n\nmy_order &lt;-\n  data2plot |&gt;\n  group_by(format) |&gt;\n  summarise(n = sum(n)) |&gt;\n  ungroup() |&gt;\n  arrange(desc(n)) |&gt;\n  pull(format) |&gt;\n  as.character()\n\npretty_format_label &lt;- c(\n  'aws' = 'AWS    ',\n  'swagger' = 'Swagger    ',\n  'google' = 'Google    ',\n  'openapi' = 'OpenAPI    ',\n  'Other' = 'Other    '\n)\n\ndata2plot2 &lt;-\n  data2plot |&gt;\n  group_by(format) |&gt;\n  mutate(cumsum = cumsum(n)) |&gt;\n  ungroup()\n\n\ndata2plot2 |&gt;\n  ggplot(aes(x = n, y = factor(format, levels = rev(my_order)))) +\n  geom_segment(\n    aes(\n      x = cumsum - n,\n      xend = cumsum,\n      color = str_to_sentence(apisguru_category) |&gt; str_replace_all('_', ' ')\n    ),\n    linewidth = 5,\n    lineend = 'round',\n    key_glyph = 'point'\n  ) +\n  geom_text(\n    data = tibble(format = my_order, n = 0),\n    aes(label = pretty_format_label[format]),\n    hjust = 1,\n    family = 'Ubuntu',\n    size = 3,\n    color = is_the_new_black\n  ) +\n  MetBrewer::scale_color_met_d('Nizami', direction = -1) +\n  scale_x_continuous(expand = c(0, 0, 0, 0)) +\n  guides(color = guide_legend(override.aes = list(size = 3))) +\n  coord_radial(start = 0, end = 1.6 * pi, theta = 'x', inner.radius = .15) +\n  theme(\n    axis.text.y = element_blank(),\n    legend.position = 'bottom',\n    legend.key.size = unit(0, 'line'),\n    legend.key.spacing.y = unit(-.45, 'line'),\n    legend.text = element_text(margin = margin(l = -0.15, unit = \"cm\"))\n  ) +\n  labs(\n    x = 'Number of APIs',\n    y = NULL,\n    color = NULL,\n    title = \"API.guru\",\n    subtitle = \"Which API formats are used the most? and for what?\",\n    caption = str_wrap(\n      \"NOTE This visualization offers a preliminary look at the data and may not capture the full complexity of the underlying reality. SOURCE #Tidytuesday 2025-06-17 GITHUB barreiro-r\",\n      width = 65\n    ) |&gt;\n      str_replace_all(\"@\", \"\\n\")\n  )\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nNote\n\n\n\nI tryed to use ggforce::zoom_panel() and {ggmagnify} but both didnâ€™t work."
  },
  {
    "objectID": "posts/2025-06-03/notebook.html",
    "href": "posts/2025-06-03/notebook.html",
    "title": "Project Gutenberg",
    "section": "",
    "text": "Note\n\n\n\n Check data in TidyTuesday GitHub repository.\n\n\nThis week weâ€™re exploring books from Project Gutenberg and the {https://docs.ropensci.org/gutenbergr/} R package!\n\n[{gutenbergr} allows you to] Download and process public domain works in the Project Gutenberg collection https://www.gutenberg.org/. Includes metadata for all Project Gutenberg works, so that they can be searched and retrieved."
  },
  {
    "objectID": "posts/2025-06-03/notebook.html#about-the-data",
    "href": "posts/2025-06-03/notebook.html#about-the-data",
    "title": "Project Gutenberg",
    "section": "",
    "text": "Note\n\n\n\n Check data in TidyTuesday GitHub repository.\n\n\nThis week weâ€™re exploring books from Project Gutenberg and the {https://docs.ropensci.org/gutenbergr/} R package!\n\n[{gutenbergr} allows you to] Download and process public domain works in the Project Gutenberg collection https://www.gutenberg.org/. Includes metadata for all Project Gutenberg works, so that they can be searched and retrieved."
  },
  {
    "objectID": "posts/2025-06-03/notebook.html#initializing",
    "href": "posts/2025-06-03/notebook.html#initializing",
    "title": "Project Gutenberg",
    "section": "1 Initializing",
    "text": "1 Initializing\n\n1.1 Load libraries\n\nlibrary(tidyverse)\nlibrary(glue)\nlibrary(scales)\nlibrary(showtext)\nlibrary(ggtext)\nlibrary(shadowtext)\n\nfont_add_google(\"Ubuntu\", \"Ubuntu\", regular.wt = 400, bold.wt = 700)\nshowtext_auto()\nshowtext_opts(dpi = 300)\n\n\n\n1.2 Set theme\n\ntheme_set(\n    theme_minimal() +\n    theme(\n    # axis.line.x.bottom = element_line(color = '#474747', linewidth = .3),\n    # axis.ticks.x= element_line(color = '#474747', linewidth = .3),\n    # axis.line.y.left = element_line(color = '#474747', linewidth = .3),\n    # axis.ticks.y= element_line(color = '#474747', linewidth = .3),\n    # # panel.grid = element_line(linewidth = .3, color = 'grey90'),\n    panel.grid.major = element_blank(),\n    panel.grid.minor = element_blank(),\n    axis.ticks.length = unit(-0.15, \"cm\"),\n    plot.background = element_blank(),\n    plot.title.position = \"plot\",\n    plot.title = element_text(family = \"Ubuntu\", size = 18, face = 'bold'),\n    plot.caption = element_text(size = 8, color = 'grey60',margin = margin(20,0,0,0)),\n    plot.subtitle = element_text(size = 9,lineheight = 1.15, margin = margin(5,0,15,0)),\n    axis.title.x = element_markdown(family = \"Ubuntu\", hjust = .5, size = 8, color = \"grey40\"),\n    axis.title.y = element_markdown(family = \"Ubuntu\", hjust = .5, size = 8, color = \"grey40\"),\n    axis.text = element_text(family = \"Ubuntu\", hjust = .5, size = 8, color = \"grey40\"),\n    legend.position = \"top\",\n    text = element_text(family = \"Ubuntu\", color = \"#495373\"),\n    plot.margin = margin(25, 25, 25, 25))\n)\n\n\n\n1.3 Load this weekâ€™s data\n\ntuesdata &lt;- tidytuesdayR::tt_load(2025, week = 22)\n\ngutenberg_authors &lt;- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/main/data/2025/2025-06-03/gutenberg_authors.csv')\ngutenberg_languages &lt;- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/main/data/2025/2025-06-03/gutenberg_languages.csv')\ngutenberg_metadata &lt;- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/main/data/2025/2025-06-03/gutenberg_metadata.csv')\ngutenberg_subjects &lt;- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/main/data/2025/2025-06-03/gutenberg_subjects.csv')"
  },
  {
    "objectID": "posts/2025-06-03/notebook.html#data-analysis",
    "href": "posts/2025-06-03/notebook.html#data-analysis",
    "title": "Project Gutenberg",
    "section": "2 Data analysis",
    "text": "2 Data analysis\nHow many types are languages?\n\ngutenberg_languages |&gt; count(language, sort = TRUE)\n\n# A tibble: 70 Ã— 2\n   language     n\n   &lt;chr&gt;    &lt;int&gt;\n 1 en       60693\n 2 fr        3973\n 3 fi        3313\n 4 de        2324\n 5 it        1056\n 6 nl        1046\n 7 es         885\n 8 pt         647\n 9 hu         609\n10 zh         444\n# â„¹ 60 more rows\n\n\nHow many authors are there?\n\ngutenberg_authors |&gt; count(author, sort = TRUE) \n\n# A tibble: 25,940 Ã— 2\n   author                n\n   &lt;chr&gt;             &lt;int&gt;\n 1 Hughes, Thomas        4\n 2 Smith, George         4\n 3 Taylor, Thomas        4\n 4 Wilson, John          4\n 5 Anderson, William     3\n 6 Brown, John           3\n 7 Brown, Thomas         3\n 8 Butler, Samuel        3\n 9 Edwards, Edward       3\n10 Fowler, Frank         3\n# â„¹ 25,930 more rows\n\n\nRepeated author names? (Coincidence?)"
  },
  {
    "objectID": "posts/2025-06-03/notebook.html#transform-data-for-plotting",
    "href": "posts/2025-06-03/notebook.html#transform-data-for-plotting",
    "title": "Project Gutenberg",
    "section": "3 Transform Data for Plotting",
    "text": "3 Transform Data for Plotting\n\n3.1 Creating table of authors with most records for each language\n\nauthor_blocklist &lt;- c('Various', 'Anonymous', 'Unknown', NA)\n\ndata2plot &lt;-\n  gutenberg_metadata |&gt;\n  select(gutenberg_author_id, language) |&gt;\n  left_join(gutenberg_authors, by = 'gutenberg_author_id') |&gt;\n  count(gutenberg_author_id, author, language, sort = TRUE) |&gt;\n  filter(!author %in% author_blocklist) |&gt;\n  group_by(language) |&gt;\n  slice_max(n = 1, order_by = n, with_ties = FALSE) |&gt;\n  ungroup() |&gt;\n  arrange(-n) |&gt;\n  head(10)\n\n\ndata2plot &lt;- bind_rows(\n  data2plot |&gt; mutate(to_dodge = TRUE),\n  data2plot |&gt; mutate(to_dodge = FALSE))\n\ndata2plot &lt;- data2plot |&gt; mutate(label = glue('**{author}**&lt;span style=\"color:#aebae0\"&gt; {language}&lt;/span&gt;'))"
  },
  {
    "objectID": "posts/2025-06-03/notebook.html#time-to-plot",
    "href": "posts/2025-06-03/notebook.html#time-to-plot",
    "title": "Project Gutenberg",
    "section": "4 Time to plot!",
    "text": "4 Time to plot!\n\n4.1 Before\n\ndata2plot |&gt; filter(to_dodge) |&gt;\n  ggplot(aes(x = n, y = author)) +\n  geom_col() +\n  theme_gray() +\n  labs(\n    title = 'Language Favorites',\n    subtitle = 'Authors in Project Gutenberg with most records for the top 10 languages.')\n\n\n\n\n\n\n\n\n\ndata2plot |&gt;\n  ggplot(aes(x = n, y = fct_reorder(author, n))) +\n  geom_col(aes(alpha = to_dodge), position = 'dodge', width = 0.8, fill = '#aebae0') +\n  geom_text(\n    aes(label = comma(n)),\n    color = 'white',\n    nudge_y = -0.2,\n    nudge_x = -2,\n    hjust = 1\n  ) +\n  geom_richtext(\n    aes(label = label, alpha = to_dodge),\n    x = 0,\n    hjust = 0,\n    nudge_y = 0.18,\n    color = '#495373',\n    family = 'Ubuntu',\n    size = 3,\n    fill = NA,\n    label.color = NA, # remove background and outline\n    label.padding = grid::unit(rep(0, 4), \"pt\") # remove padding\n  ) +\n  scale_alpha_manual(values = c('TRUE' = 0, 'FLASE' = 1)) +\n  guides(alpha = 'none') +\n  coord_cartesian(expand = FALSE) +\n  theme(axis.text.y = element_blank(), axis.text.x = element_blank()) +\n  labs(\n    x = NULL,\n    y = NULL,\n    title = 'Language Favorites',\n    subtitle = 'Authors in Project Gutenberg with most records for the top 10 languages.')"
  },
  {
    "objectID": "posts/2025-05-20/notebook.html",
    "href": "posts/2025-05-20/notebook.html",
    "title": "Water quality at Sydney Beaches",
    "section": "",
    "text": "tuesdata &lt;- tidytuesdayR::tt_load(2025, week = 20)\nwater_quality &lt;- tuesdata$water_quality\nweather &lt;- tuesdata$weather\n\n\nlibrary(tidyverse)\nlibrary(glue)\nlibrary(scales)\nlibrary(showtext)\nlibrary(ggtext)\n\nfont_add_google(\"Ubuntu\", \"Ubuntu\", regular.wt = 300, bold.wt = 700)\nshowtext_auto()\nshowtext_opts(dpi = 300)"
  },
  {
    "objectID": "posts/2025-05-20/notebook.html#before",
    "href": "posts/2025-05-20/notebook.html#before",
    "title": "Water quality at Sydney Beaches",
    "section": "Before",
    "text": "Before\n\ndata2plot |&gt;\n  filter(region != 'Western Sydney') |&gt;\n  ggplot(aes(x = date, y = roll_mean_enterococci)) +\n  geom_smooth(aes(color = region), linewidth = 0.5, se = FALSE, span = .2) +\n  labs(\n    title = 'Water Quality at Sydney Beaches',\n    subtitle = str_wrap(\n      width = 50,\n      'High concetration of _Enterococci spp._ in beach water can indicate contamination and poses health risks to swimmers, such as gastrointestinal upset and infections.'\n    )\n  )"
  },
  {
    "objectID": "posts/2025-05-20/notebook.html#after",
    "href": "posts/2025-05-20/notebook.html#after",
    "title": "Water quality at Sydney Beaches",
    "section": "After",
    "text": "After\n\naxis_text &lt;-\n  tibble(y = c(100, 200, 300)) |&gt;\n  mutate(\n    label = if_else(\n      y == max(y),\n      str_c(y, ' Enterococcus spp. CFL/ml'),\n      str_c(y)\n    )\n  ) |&gt;\n  mutate(date = data2plot$date |&gt; min())\n\ndata2plot |&gt;\n  filter(region != 'Western Sydney') |&gt;\n  ggplot(aes(x = date, y = roll_mean_enterococci)) +\n\n  geom_text(\n    data = axis_text,\n    aes(y = y, label = label, x = date - 2000),\n    size = 2,\n    color = '#9fa8c2',\n    hjust = 0,\n    vjust = -0.4\n  ) +\n\n  geom_smooth(aes(color = region), linewidth = 0.5, se = FALSE, span = .2) +\n  guides(color = 'none') +\n  facet_wrap(~region, ncol = 2, scales = 'free_x') +\n  gghighlight::gghighlight(\n    roll_mean_enterococci &gt;= 0,\n    keep_scales = TRUE,\n    use_direct_label = FALSE,\n    unhighlighted_params = list(\n      alpha = 0.75,\n      linewidth = 0.3,\n      color = '#d3daed'\n    )\n  ) +\n\n  theme_minimal() +\n  labs(\n    x = NULL,\n    y = NULL,\n    title = 'Water Quality at Sydney Beaches',\n    subtitle = str_wrap(\n      width = 60,\n      'High concetration of _Enterococci spp._ in beach water can indicate contamination and poses health risks to swimmers, such as gastrointestinal upset and infections.'\n    ) |&gt; str_replace_all('\\n','&lt;br&gt;')\n  ) +\n\n  theme(\n    panel.grid.major.x = element_blank(),\n    panel.grid.major.y = element_line(\n      linewidth = .1,\n      color = '#d3daed'\n    ),\n    panel.grid.minor = element_blank(),\n    axis.ticks.x = element_line(color = '#9fa8c2', linewidth = .25),\n    text = element_text(family = \"Ubuntu\"),\n    axis.text = element_text(color = '#9fa8c2', hjust = .5, size = 6),\n    axis.text.y = element_blank(),\n    plot.title = element_text(family = 'Ubuntu', face = 'bold', size = 16),\n    plot.subtitle = element_markdown(\n      family = 'Ubuntu',\n      size = 9,\n      color = '#4a5063',\n      margin = margin(0, 0, 20, 0),\n      lineheight = 1.25,\n    ),\n    panel.spacing = unit(2, \"lines\"),\n    strip.placement = \"outside\",\n    strip.text = element_text(\n      # hjust = -0.11,\n      color = '#0d3bb8',\n      hjust = 0,\n      size = 7,\n      margin = margin(0, 0.5, 0, 0)\n    ),\n    strip.background = element_blank(),\n    plot.margin = margin(25, 25, 25, 25)\n  ) +\n  scale_y_continuous(expand = c(0, 0, 0, 0)) +\n  scale_x_date(\n    expand = c(0, 0, 0.1, 0),\n    label = year,\n    breaks = c(\n      data2plot$date |&gt; min(),\n      as.Date('2010-01-01'),\n      data2plot$date |&gt; max()\n    )\n  ) +\n  scale_color_manual(values = c('#0d3bb8', '#0d3bb8', '#0d3bb8', '#0d3bb8'))"
  },
  {
    "objectID": "posts/2025-04-11/notebook.html",
    "href": "posts/2025-04-11/notebook.html",
    "title": "National Science Foundation Grant Terminations under the Trump Administration",
    "section": "",
    "text": "library(dplyr)\nlibrary(tidyr)\nlibrary(stringr)\nlibrary(curl)\nlibrary(ggplot2)\nlibrary(ggimage)\nlibrary(ggrepel)\nlibrary(ggtext)\n  \n\n# ---- Data Preparation ----\n\ntuesdata &lt;- tidytuesdayR::tt_load(2025, week = 14)\ncare_state &lt;- tuesdata$care_state\n\ndata2plot &lt;- \n  care_state |&gt;\n  mutate(score = if_else(is.na(score), 0, score)) |&gt;\n  filter(measure_id %in% c('HCP_COVID_19','IMM_3')) |&gt;\n  mutate(measure_id = case_when(\n    measure_id == 'HCP_COVID_19' ~ \"COVID-19\",\n    measure_id == 'IMM_3' ~ \"Influenza\"\n  ))\n\n# --- Raw Plot\ndata2plot |&gt;\n  ggplot(aes(x = score, y = state, fill = measure_id)) +\n  geom_col()\n\n\n\n\n\n\n\n# --- Stage 2\n\nlibrary(geofacet)\ndata2plot |&gt;\n  ggplot(aes(x = score, y = measure_id)) +\n  geom_col(aes(fill = measure_id)) +\n  facet_geo(~ state, grid = \"us_state_grid1\", strip.position = \"top\")\n\n\n\n\n\n\n\n# --- Stage 3\n\ndata2plot |&gt;\n  ggplot(aes(x = score, y = measure_id)) +\n  geom_col(aes(fill = measure_id)) +\n  facet_geo(~ state, grid = \"us_state_grid1\", strip.position = \"top\") +\n  coord_polar() +\n  geom_text(data = .%&gt;% filter(measure_id == 'Influenza'), x = 0, y = -1, aes(label = scales::percent(score/100, accuracy = 1), color = measure_id), size = 2.5,fontface = \"bold\") +\n  geom_text(data = .%&gt;% filter(measure_id == 'COVID-19'), x = 0, y = -3, aes(label = scales::percent(score/100, accuracy = 1), color = measure_id), size = 2.5,fontface = \"bold\") +\n  scale_y_discrete(expand = c(0,3,0,0)) +\n  scale_x_continuous(limits = c(0,100), expand = c(0,0,0,0)) +\n  theme_void()\n\n\n\n\n\n\n\n# --- Stage 4\n\n\ndata2plot |&gt;\n  ggplot(aes(x = score, y = measure_id)) +\n  geom_col(aes(fill = measure_id)) +\n  geom_text(data = .%&gt;% filter(measure_id == 'Influenza'), x = 0, y = -1, aes(label = scales::percent(score/100, accuracy = 1), color = measure_id), size = 2.5,fontface = \"bold\") +\n  geom_text(data = .%&gt;% filter(measure_id == 'COVID-19'), x = 0, y = -3, aes(label = scales::percent(score/100, accuracy = 1), color = measure_id), size = 2.5,fontface = \"bold\") +\n  coord_polar() +\n  facet_geo(~ state, grid = \"us_state_grid1\", strip.position = \"top\") +\n  scale_y_discrete(expand = c(0,3,0,0)) +\n  scale_x_continuous(limits = c(0,100), expand = c(0,0,0,0)) +\n  scale_fill_manual(values = c(\"#99780b\",\"#14405C\")) +\n  scale_color_manual(values = c(\"#99780b\",\"#14405C\")) +\n  labs(\n    fill = NULL, \n    title = \"US Healthcare Personnel Vaccination\", \n    subtitle = \"Percentage of healthcare personnel who are up to date with COVID-19 or Influenza vaccinations on US (2024)\",\n    caption = 'SOURCE: #Tidytuesday 2025-04-08') +\n  guides(color = 'none') +\n  theme_void() +\n  theme(\n    plot.title.position = \"plot\",\n    plot.title = element_text(family = \"Ubuntu\", size = 20, face = 'bold'),\n    plot.subtitle = element_markdown(size = 9,lineheight = 1.25, margin = margin(5,0,20,0)),\n    legend.position = \"top\",\n    text = element_text(family = \"Ubuntu\"),\n    strip.text = element_text(color = 'grey30'),\n    legend.margin = margin(0,0,20,0),\n    legend.spacing = unit(0.1, 'cm'),\n    legend.key.height= unit(0.3, 'cm'),\n    legend.key.width= unit(0.5, 'cm'))"
  },
  {
    "objectID": "posts/2025-02-18/notebook.html",
    "href": "posts/2025-02-18/notebook.html",
    "title": "Agencies from the FBI Crime Data API",
    "section": "",
    "text": "Note\n\n\n\n Check data in TidyTuesday GitHub repository.\n\n\nThis week weâ€™re exploring data from the FBI Crime Data API! Specifically, weâ€™re looking at agency-level data across all 50 states in the USA. This dataset provides details on law enforcement agencies that have submitted data to the FBIâ€™s Uniform Crime Reporting (UCR) Program and are displayed on the Crime Data Explorer (CDE).\n\nThe Open Data Portal of Istituto Nazionale di Geofisica e Vulcanologia (INGV) gives public access to data resulting from institutional research activities in the fields of Seismology, Volcanology, and Environment."
  },
  {
    "objectID": "posts/2025-02-18/notebook.html#about-the-data",
    "href": "posts/2025-02-18/notebook.html#about-the-data",
    "title": "Agencies from the FBI Crime Data API",
    "section": "",
    "text": "Note\n\n\n\n Check data in TidyTuesday GitHub repository.\n\n\nThis week weâ€™re exploring data from the FBI Crime Data API! Specifically, weâ€™re looking at agency-level data across all 50 states in the USA. This dataset provides details on law enforcement agencies that have submitted data to the FBIâ€™s Uniform Crime Reporting (UCR) Program and are displayed on the Crime Data Explorer (CDE).\n\nThe Open Data Portal of Istituto Nazionale di Geofisica e Vulcanologia (INGV) gives public access to data resulting from institutional research activities in the fields of Seismology, Volcanology, and Environment."
  },
  {
    "objectID": "posts/2025-02-18/notebook.html#initializing",
    "href": "posts/2025-02-18/notebook.html#initializing",
    "title": "Agencies from the FBI Crime Data API",
    "section": "1 Initializing",
    "text": "1 Initializing\n\n1.1 Load libraries\n\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport matplotlib.ticker as ticker\n\n\n\n1.2 Set theme\n\nplt.style.use('~/Documents/GitHub/tidytuesday/posts/2025-02-18/rb-style.mplstyle')\n\n\n\n1.3 Load this weekâ€™s data\n\nagencies = pd.read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/main/data/2025/2025-02-18/agencies.csv')"
  },
  {
    "objectID": "posts/2025-02-18/notebook.html#time-to-plot",
    "href": "posts/2025-02-18/notebook.html#time-to-plot",
    "title": "Agencies from the FBI Crime Data API",
    "section": "2 Time to plot!",
    "text": "2 Time to plot!\n\n2.1 Before\n\ndata2plot = (\n    agencies.groupby(\"state\").size().reset_index(name=\"n\").sort_values(by=\"n\").tail(10)\n)\n\nfig, ax = plt.subplots()\nfig.set_figwidth(5)\nfig.set_figheight(3)\n\nax.set_axisbelow(True)\nax.grid(True, axis=\"x\", which=\"major\", linestyle=\"-\", linewidth=0.7, color=\"#d3daed\")\n\n\nax.barh(data2plot[\"state\"], data2plot[\"n\"], color=\"#495373\")\n\n# Apply the formatter to the y-axis\nax.xaxis.set_major_formatter(ticker.StrMethodFormatter(\"{x:,.0f}\"))\n\nax.set_title(\"Number of agencies by state\")\nax.set_xlabel(\"Counts (n)\")\n\nplt.tight_layout()\nplt.show()\n\n\n\n\n\n\n\n\n\n\n2.2 After\n\nplt.style.use(\"~/Documents/GitHub/tidytuesday/posts/2025-02-18/rb-style.mplstyle\")\n\ndata2plot = (\n    agencies.groupby([\"state\", \"agency_type\"])\n    .size()\n    .reset_index(name=\"n\")\n    .sort_values(by=\"n\")\n)\n\n# Pivot wider to make the stacked byplot\ndata2plot_wide = data2plot.pivot_table(\n    index=\"state\", columns=\"agency_type\", values=\"n\", fill_value=0\n)\n\n# Sorting and filtering\ndata2plot_wide[\"total_agencies\"] = data2plot_wide.sum(axis=1)\ndata2plot_wide_sorted = data2plot_wide.sort_values(by=\"total_agencies\", ascending=True)\ndata2plot_wide_sorted = data2plot_wide_sorted.query(\"total_agencies &gt; 450\")\ndata2plot_wide_sorted.drop(columns=\"total_agencies\", inplace=True)\n\n# Start plotting ------------------------------------------------------------------------\nfig, ax = plt.subplots()\n\n# Color palette\ncolor_map = [\n    \"#495373\",\n    \"#ce4441\",\n    \"#ee8577\",\n    \"#eb7926\",\n    \"#ffbb44\",\n    \"#859b6c\",\n    \"#62929a\",\n    \"#004f63\",\n    \"#122451\",\n]\n\n# Geom\ndata2plot_wide_sorted.plot(\n    kind=\"barh\", stacked=True, figsize=(5, 3), ax=ax, width=0.8, color=color_map\n)\n\n# Add grid\nax.set_axisbelow(True)\nax.grid(True, axis=\"x\", which=\"major\", linestyle=\"-\", linewidth=0.7, color=\"#d3daed\")\n\n# Format x axis (add comma)\nax.xaxis.set_major_formatter(ticker.StrMethodFormatter(\"{x:,.0f}\"))\n\n# Labels\nax.set_title(\"Number of agencies by state\")\nax.set_xlabel(\"Counts (n)\")\nax.set_ylabel(\"\")\n\n# Legend\nplt.legend(\n    title=\"Type of Agency\", title_fontproperties={\"weight\": \"bold\"}, alignment=\"left\"\n)\n\n# Plot & Pray\nplt.tight_layout()\nplt.show()"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Tidytuesday by Rodrigo Barreiro",
    "section": "",
    "text": "Hey there, and welcome to my TidyTuesday gallery! Â ðŸ‘‹\nIf youâ€™re not familiar, #TidyTuesday is this awesome weekly data challenge run by the R for Data Science online community. Every week, they release a brand new dataset, and I jump at the chance to practice my data wrangling and visualization skills in R (and Python).\nFor each entry, youâ€™ll find my code, the visuals I came up with.\nI love seeing what stories the numbers can tell and I hope you enjoy it too!\nâ€” Rodrigo Barreiro\n\nGallery\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nbars\n\n\ncircular\n\n\n\n\nJun 17, 2025\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\ntimeseries\n\n\nsubplot\n\n\n\n\nJun 10, 2025\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nbars\n\n\n\n\nJun 3, 2025\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nradar\n\n\n\n\nMay 27, 2025\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\ntimeseries\n\n\n\n\nMay 23, 2025\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\ngeospatial\n\n\n\n\nMay 13, 2025\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nmap\n\n\ncircular\n\n\n\n\nApr 11, 2025\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\npython\n\n\ntimeseries\n\n\n\n\nMar 4, 2025\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\npython\n\n\nbars\n\n\n\n\nFeb 18, 2025\n\n\n\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "posts/2025-03-04/notebook.html",
    "href": "posts/2025-03-04/notebook.html",
    "title": "Long Beach Animal Shelter",
    "section": "",
    "text": "Note\n\n\n\n Check data in TidyTuesday GitHub repository.\n\n\nThis week weâ€™re exploring the Long Beach Animal Shelter Data!\nThe dataset comes from the City of Long Beach Animal Care Services via the {animalshelter} R package.\n\nThis dataset comprises of the intake and outcome record from Long Beach Animal Shelter."
  },
  {
    "objectID": "posts/2025-03-04/notebook.html#about-the-data",
    "href": "posts/2025-03-04/notebook.html#about-the-data",
    "title": "Long Beach Animal Shelter",
    "section": "",
    "text": "Note\n\n\n\n Check data in TidyTuesday GitHub repository.\n\n\nThis week weâ€™re exploring the Long Beach Animal Shelter Data!\nThe dataset comes from the City of Long Beach Animal Care Services via the {animalshelter} R package.\n\nThis dataset comprises of the intake and outcome record from Long Beach Animal Shelter."
  },
  {
    "objectID": "posts/2025-03-04/notebook.html#initializing",
    "href": "posts/2025-03-04/notebook.html#initializing",
    "title": "Long Beach Animal Shelter",
    "section": "1 Initializing",
    "text": "1 Initializing\n\n1.1 Load libraries\n\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport matplotlib.ticker as ticker\nimport seaborn as sns\n\nimport calendar # to convert number to month\n\n\n\n1.2 Set theme\n\nplt.style.use('~/Documents/GitHub/tidytuesday/posts/2025-03-04/rb-style.mplstyle')\n\n# Color palette\ncolor_map = [\n    \"#495373\",\n    \"#ce4441\",\n    \"#ee8577\",\n    \"#eb7926\",\n    \"#ffbb44\",\n    \"#859b6c\",\n    \"#62929a\",\n    \"#004f63\",\n    \"#122451\",\n]\n\n\n\n1.3 Load this weekâ€™s data\n\nlongbeach = pd.read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/main/data/2025/2025-03-04/longbeach.csv')"
  },
  {
    "objectID": "posts/2025-03-04/notebook.html#time-to-plot",
    "href": "posts/2025-03-04/notebook.html#time-to-plot",
    "title": "Long Beach Animal Shelter",
    "section": "2 Time to plot!",
    "text": "2 Time to plot!\n\nPlot 1\n\n# Add year\nlongbeach[\"outcome_year\"] = pd.to_datetime(longbeach[\"outcome_date\"]).dt.year\n\n\n# Start plot ----------------------------------------------------------------------------\nfig, ax = plt.subplots()\nfig.set_figwidth(5)\nfig.set_figheight(3)\n\n# Grid\nax.set_axisbelow(True)\nax.grid(True, axis=\"y\", which=\"major\", linestyle=\"-\", linewidth=0.7, color=\"#d3daed\")\n\n\nsns.histplot(longbeach, x=\"outcome_year\", binwidth=1, color = color_map[0],element=\"step\")\n\n# Apply the formatter to the y-axis\nax.yaxis.set_major_formatter(ticker.StrMethodFormatter(\"{x:,.0f}\"))\n\nax.set_title(\"Entries by Year\")\nax.set_ylabel(\"Counts (n)\")\nax.set_xlabel(\"\")\n\nplt.tight_layout()\nplt.show()\n\n# ---------------------------------------------------------------------------------------\n\n\n\n\n\n\n\n\n\n\nPlot 2\n\n# Add year\nlongbeach[\"outcome_month\"] = pd.to_datetime(longbeach[\"outcome_date\"]).dt.month\n\ndata2plot = (\n    longbeach.groupby([\"outcome_year\", \"outcome_month\"]).size().reset_index(name=\"n\")\n)\ndata2plot[\"outcome_year\"] = data2plot[\"outcome_year\"].astype(\"int\")\ndata2plot[\"outcome_month\"] = data2plot[\"outcome_month\"].astype(\"int\")\n\nmonth_map = {i: calendar.month_abbr[i] for i in range(1, 13)}\ndata2plot[\"outcome_month_abbr\"] = data2plot[\"outcome_month\"].apply(\n    lambda x: month_map.get(x)\n)\n\n# Start plot ----------------------------------------------------------------------------\nfig, ax = plt.subplots()\nfig.set_figwidth(5)\nfig.set_figheight(3)\n\n# Grid\nax.set_axisbelow(True)\nax.grid(True, axis=\"y\", which=\"major\", linestyle=\"-\", linewidth=0.7, color=\"#d3daed\")\n\nsns.lineplot(\n    data2plot, x=\"outcome_month_abbr\", y=\"n\", hue=\"outcome_year\", palette=color_map\n)\n\n# Apply the formatter to the y-axis\nax.yaxis.set_major_formatter(ticker.StrMethodFormatter(\"{x:,.0f}\"))\n\n# Labels\nax.set_title(\"Entries by Year\")\nax.set_ylabel(\"Counts (n)\")\nax.set_xlabel(\"\")\n\n# Legend\nlegend = plt.legend(\n    title=\"Year\",\n    title_fontproperties={\"weight\": \"bold\"},\n    loc=\"lower right\",\n)\nplt.setp(legend.get_title(), color='#495373')\n\n# Plot & Pray\nplt.tight_layout()\nplt.show()\n\n\n\n\n\n\n\n\n\n\nPlot 3\n\n# Start plot ----------------------------------------------------------------------------\n\n# Geometry\ng = sns.relplot(\n    data2plot,\n    x=\"outcome_month_abbr\",\n    y=\"n\",\n    hue=\"outcome_year\",\n    palette=color_map,\n    legend=False,\n    kind=\"line\",\n    col=\"outcome_year\",\n    col_wrap=4,\n    zorder=5,\n    height=1.51,\n    aspect=1 \n)\n\n# Iterate over each subplot to customize further\nfor year, ax in g.axes_dict.items():\n\n    # Add the title as an annotation within the plot\n    ax.text(0.8, 0.85, year, transform=ax.transAxes, color = '#495373', fontsize = 8)\n\n    # Plot every year's time series in the background\n    sns.lineplot(\n        data2plot,\n        x=\"outcome_month_abbr\",\n        y=\"n\",\n        units=\"outcome_year\",\n        estimator=None,\n        color=\"#d3daed\",\n        linewidth=1,\n        ax=ax,\n    )\n\n    # Grid\n    ax.set_axisbelow(True)\n    ax.grid(True, axis=\"y\", which=\"major\", linestyle=\"-\", linewidth=0.7, color=\"#d3daed\")\n\n# Apply the formatter to the y-axis\n# g.yaxis.set_major_formatter(ticker.StrMethodFormatter(\"{x:,.0f}\"))\n\n# Reduce the frequency of the x axis ticks\nax.set_xticks(ax.get_xticks()[::4]+[ax.get_xticks()[-1]])\n\n# Labels\ng.fig.suptitle(\"Long Beach Animal Shelter Reports\", y=.93, color = '#495373', weight = 'bold') \ng.set_titles(\" \")\ng.set_ylabels(\"Counts (n)\")\ng.set_xlabels(\" \")\n\n# Legend\n# legend = g.legend(\n#     title=\"Year\",\n#     title_fontproperties={\"weight\": \"bold\"},\n#     loc=\"lower right\",\n# )\n# g.setp(legend.get_title(), color='#495373')\n\n# Plot & Pray\ng.tight_layout()"
  },
  {
    "objectID": "posts/2025-05-13/notebook.html",
    "href": "posts/2025-05-13/notebook.html",
    "title": "Seismic Events at Mount Vesuvius",
    "section": "",
    "text": "Note\n\n\n\nCheck data in tidytuesday GitHub repository.\n\n\nThe dataset this week explores seismic events detected at the famous Mount Vesuvius in Italy. It comes from the Italian Istituto Nazionale di Geofisica e Vulcanologia (INGV)â€™s Data Portal and can be explored along with other seismic areas on the GOSSIP website. The raw data was saved as individual CSV files from the GOSSIP website and some values were translated from Italian to English.\n\nThe Open Data Portal of Istituto Nazionale di Geofisica e Vulcanologia (INGV) gives public access to data resulting from institutional research activities in the fields of Seismology, Volcanology, and Environment."
  },
  {
    "objectID": "posts/2025-05-13/notebook.html#about-the-data",
    "href": "posts/2025-05-13/notebook.html#about-the-data",
    "title": "Seismic Events at Mount Vesuvius",
    "section": "",
    "text": "Note\n\n\n\nCheck data in tidytuesday GitHub repository.\n\n\nThe dataset this week explores seismic events detected at the famous Mount Vesuvius in Italy. It comes from the Italian Istituto Nazionale di Geofisica e Vulcanologia (INGV)â€™s Data Portal and can be explored along with other seismic areas on the GOSSIP website. The raw data was saved as individual CSV files from the GOSSIP website and some values were translated from Italian to English.\n\nThe Open Data Portal of Istituto Nazionale di Geofisica e Vulcanologia (INGV) gives public access to data resulting from institutional research activities in the fields of Seismology, Volcanology, and Environment."
  },
  {
    "objectID": "posts/2025-05-13/notebook.html#initializing",
    "href": "posts/2025-05-13/notebook.html#initializing",
    "title": "Seismic Events at Mount Vesuvius",
    "section": "1 Initializing",
    "text": "1 Initializing\n\n1.1 Load libraries\n\nlibrary(tidyverse)\nlibrary(glue)\nlibrary(scales)\nlibrary(showtext)\nlibrary(ggtext)\nlibrary(shadowtext)\nlibrary(hexbin)\nlibrary(OpenStreetMap)\nlibrary(ggplot2)\nlibrary(ggspatial)\nlibrary(sf)\nlibrary(ggforce)\n\nfont_add_google(\"Ubuntu\", \"Ubuntu\", regular.wt = 400, bold.wt = 700)\nshowtext_auto()\nshowtext_opts(dpi = 300)\n\n\n\n1.2 Set theme\n\ntheme_set(\n    theme_minimal() +\n    theme(\n    axis.line.x.bottom = element_line(color = '#47506e', linewidth = .3),\n    # axis.ticks.x= element_line(color = '#47506e', linewidth = .3),\n    axis.line.y.left = element_line(color = '#47506e', linewidth = .3),\n    # axis.ticks.y= element_line(color = '#47506e', linewidth = .3),\n    panel.grid = element_line(linewidth = .3, color = '#aebae0'),\n    panel.grid.minor = element_blank(),\n    axis.ticks.length = unit(-0.15, \"cm\"),\n    plot.background = element_blank(),\n    plot.title.position = \"plot\",\n    plot.title = element_text(family = \"Ubuntu\", size = 18, face = 'bold'),\n    plot.caption = element_text(size = 8, color = '#aebae0',margin = margin(20,0,0,0)),\n    plot.subtitle = element_text(size = 9,lineheight = 1.15, margin = margin(5,0,15,0)),\n    axis.title.x = element_markdown(family = \"Ubuntu\", hjust = .5, size = 8, color = \"#47506e\"),\n    axis.title.y = element_markdown(family = \"Ubuntu\", hjust = .5, size = 8, color = \"#47506e\"),\n    axis.text = element_text(family = \"Ubuntu\", hjust = .5, size = 8, color = \"#47506e\"),\n    legend.position = \"top\",\n    text = element_text(family = \"Ubuntu\"),\n    plot.margin = margin(25, 25, 25, 25))\n)\n\n\n\n1.3 Load this weekâ€™s data\n\ntuesdata &lt;- tidytuesdayR::tt_load(2025, week = 19)\nvesuvius &lt;- tuesdata$vesuvius"
  },
  {
    "objectID": "posts/2025-05-13/notebook.html#data-analysis",
    "href": "posts/2025-05-13/notebook.html#data-analysis",
    "title": "Seismic Events at Mount Vesuvius",
    "section": "2 Data analysis",
    "text": "2 Data analysis\nHow many events per year\n\nvesuvius |&gt; mutate(year = year(time)) |&gt; count(year) |&gt; ggplot(aes(x = year, y = n)) + geom_col() + theme_minimal()\n\n\n\n\n\n\n\nvesuvius |&gt; mutate(year = year(time)) |&gt; group_by(year) |&gt; summarize(md = mean(duration_magnitude_md, na.rm = TRUE)) |&gt; ungroup() |&gt; ggplot(aes(x = year, y = md)) + geom_col() + theme_minimal()\n\n\n\n\n\n\n\n\nGeo distribuiton\n\nvesuvius |&gt; mutate(year = year(time)) |&gt; ggplot(aes(x = latitude, y = longitude)) + geom_point(aes(color = time)) + theme_minimal()\n\n\n\n\n\n\n\nvesuvius |&gt; mutate(year = year(time)) |&gt; filter(year == max(year)) |&gt; ggplot(aes(x = latitude, y = longitude)) + \n  geom_point(aes(color = time)) + theme_minimal()"
  },
  {
    "objectID": "posts/2025-05-13/notebook.html#transform-data-for-plotting",
    "href": "posts/2025-05-13/notebook.html#transform-data-for-plotting",
    "title": "Seismic Events at Mount Vesuvius",
    "section": "3 Transform Data for Plotting",
    "text": "3 Transform Data for Plotting\n\n3.1 Calculate counts by hex bin\nAt the beggining I was trying to use the defaul ggplot hexbin, but it canâ€™t change size so I have to calculate my own.\n\ndata2plot &lt;- vesuvius |&gt;\n  mutate(year = year(time)) |&gt;\n  filter(year == max(year), longitude &gt; 14.405)\n\nhb_counts &lt;- hexbin::hexbin(\n  data2plot$latitude,\n  data2plot$longitude,\n  xbins = 20,\n  IDs = TRUE\n)\n\nhex_summary_counts &lt;- data.frame(\n  hcell2xy(hb_counts),\n  count = hb_counts@count # Accesses the count for each bin\n)\n\n\n\n3.2 Loading Map\n\nmy_data_sf &lt;- st_as_sf(hex_summary_counts, coords = c(\"x\", \"y\"), crs = 4326)\nmy_data_transformed &lt;- st_transform(my_data_sf, crs = 3857)\nextent &lt;- st_bbox(my_data_transformed)\n\nopen_map &lt;- openmap(\n  upperLeft = c(\n    min(hex_summary_counts$x) - .0025,\n    max(hex_summary_counts$y) + .0025\n  ),\n  lowerRight = c(\n    max(hex_summary_counts$x) + .0025,\n    min(hex_summary_counts$y) - .0025\n  ),\n  zoom = NULL,\n  mergeTiles = TRUE,\n  type = \"bing\",\n  minNumTiles = 10\n)\nsa_map2 &lt;- openproj(open_map)"
  },
  {
    "objectID": "posts/2025-05-13/notebook.html#time-to-plot",
    "href": "posts/2025-05-13/notebook.html#time-to-plot",
    "title": "Seismic Events at Mount Vesuvius",
    "section": "4 Time to plot!",
    "text": "4 Time to plot!\n\n4.1 Before\n\nvesuvius |&gt;\n  mutate(year = year(time)) |&gt;\n  filter(year == max(year), longitude &gt; 14.405) |&gt;\n  ggplot(aes(x = latitude, y = longitude)) +\n  geom_hex(\n    binwidth = c(.0012),\n    aes(linewidth = after_stat(count)),\n    color = 'white'\n  ) +\n  theme_minimal() +\n  coord_fixed() +\n  scale_linewidth(range = c(1.5, 0)) +\n  scale_fill_distiller(palette = \"Spectral\")\n\n\n\n\n\n\n\n\n\n\n4.2 After\n\nOpenStreetMap::autoplot.OpenStreetMap(sa_map2) +\n  ggforce::geom_regon(\n    data = hex_summary_counts,\n    aes(\n      x0 = y,\n      y0 = x,\n      sides = 6,\n      r = scales::rescale(count, to = c(0.0002, 0.0008)),\n      angle = 1,\n      fill = count,\n    ),\n    alpha = 1,\n    # color = '#441C77',\n    color = 'white',\n    size = .25\n  ) +\n  scale_size(range = c(0.5, 3)) +\n  theme_void() +\n  viridis::scale_fill_viridis(\n    option = 'magma',\n    breaks = seq(0, 45, 15),\n    limits = c(0, 45)\n  ) +\n  labs(\n    title = 'Is Mount Vesuvius sleeping?',\n    subtitle = str_wrap(\n      width = 70,\n      \"Here are the sismic Events of Mount Vesuvius in 2024. Although many events, most of them are just above the volcano\"\n    ),\n    fill = \"Number of Events\",\n    caption = \"#Tidytuesday 2025-05-13\"\n  ) +\n  theme(\n    strip.background = element_blank(),\n    strip.text = element_blank(),\n    text = element_text(family = \"Ubuntu\"),\n    plot.title.position = \"plot\",\n    plot.title = element_text(family = \"Ubuntu\", size = 14, face = 'bold'),\n    plot.caption = element_text(\n      size = 8,\n      color = 'grey60',\n      margin = margin(10, 0, 0, 0)\n    ),\n    legend.title = element_text(size = 8, color = 'white'),\n    legend.justification = c(1, 0),\n    legend.position = c(0.97, 0.03),\n    legend.direction = 'horizontal',\n    legend.text = element_text(color = 'white'),\n    plot.subtitle = element_text(\n      size = 9,\n      lineheight = 1.15,\n      margin = margin(5, 0, 15, 0)\n    )\n  ) +\n  guides(\n    fill = guide_colorbar(\n      barwidth = 6,\n      barheight = .3,\n      title.position = 'top'\n    )\n  )"
  },
  {
    "objectID": "posts/2025-05-27/notebook.html",
    "href": "posts/2025-05-27/notebook.html",
    "title": "Dungeons and Dragons Monsters (2024)",
    "section": "",
    "text": "This week weâ€™re exploring monsters from the Dungeons & Dragons System Reference Document! After the popularity of our Dungeons and Dragons Spells (2024), we thought it might be fun to explore the freely available monsters from the 2024 update.\n\nEvery monster is a font of adventure. In this bestiary of Dungeons & Dragons monsters, youâ€™ll discover the weird, the whimsical, the majestic, and the macabre. Choose your favorites, and make them part of your D&D play."
  },
  {
    "objectID": "posts/2025-05-27/notebook.html#about-the-data",
    "href": "posts/2025-05-27/notebook.html#about-the-data",
    "title": "Dungeons and Dragons Monsters (2024)",
    "section": "",
    "text": "This week weâ€™re exploring monsters from the Dungeons & Dragons System Reference Document! After the popularity of our Dungeons and Dragons Spells (2024), we thought it might be fun to explore the freely available monsters from the 2024 update.\n\nEvery monster is a font of adventure. In this bestiary of Dungeons & Dragons monsters, youâ€™ll discover the weird, the whimsical, the majestic, and the macabre. Choose your favorites, and make them part of your D&D play."
  },
  {
    "objectID": "posts/2025-05-27/notebook.html#initializing",
    "href": "posts/2025-05-27/notebook.html#initializing",
    "title": "Dungeons and Dragons Monsters (2024)",
    "section": "1 Initializing",
    "text": "1 Initializing\n\n1.1 Load libraries\n\nlibrary(tidyverse)\nlibrary(glue)\nlibrary(scales)\nlibrary(showtext)\nlibrary(ggtext)\nlibrary(shadowtext)\n\nfont_add_google(\"Ubuntu\", \"Ubuntu\", regular.wt = 400, bold.wt = 700)\nshowtext_auto()\nshowtext_opts(dpi = 300)\n\n\n\n1.2 Set theme\n\ntheme_set(\n    theme_minimal() +\n    theme(\n    # axis.line.x.bottom = element_line(color = '#474747', linewidth = .3),\n    # axis.ticks.x= element_line(color = '#474747', linewidth = .3),\n    # axis.line.y.left = element_line(color = '#474747', linewidth = .3),\n    # axis.ticks.y= element_line(color = '#474747', linewidth = .3),\n    # # panel.grid = element_line(linewidth = .3, color = 'grey90'),\n    panel.grid.major = element_blank(),\n    panel.grid.minor = element_blank(),\n    axis.ticks.length = unit(-0.15, \"cm\"),\n    plot.background = element_blank(),\n    plot.title.position = \"plot\",\n    plot.title = element_text(family = \"Ubuntu\", size = 18, face = 'bold'),\n    plot.caption = element_text(size = 8, color = 'grey60',margin = margin(20,0,0,0)),\n    plot.subtitle = element_text(size = 9,lineheight = 1.15, margin = margin(5,0,15,0)),\n    axis.title.x = element_markdown(family = \"Ubuntu\", hjust = .5, size = 8, color = \"grey40\"),\n    axis.title.y = element_markdown(family = \"Ubuntu\", hjust = .5, size = 8, color = \"grey40\"),\n    axis.text = element_text(family = \"Ubuntu\", hjust = .5, size = 8, color = \"grey40\"),\n    legend.position = \"top\",\n    text = element_text(family = \"Ubuntu\"),\n    plot.margin = margin(25, 25, 25, 25))\n)\n\n\n\n1.3 Load this weekâ€™s data\n\ntuesdata &lt;- tidytuesdayR::tt_load(2025, week = 21)\nmonsters &lt;- tuesdata$monsters"
  },
  {
    "objectID": "posts/2025-05-27/notebook.html#data-analysis",
    "href": "posts/2025-05-27/notebook.html#data-analysis",
    "title": "Dungeons and Dragons Monsters (2024)",
    "section": "2 Data analysis",
    "text": "2 Data analysis\nHow many types are there?\n\nmonsters |&gt; count(type)\n\n# A tibble: 16 Ã— 2\n   type                     n\n   &lt;chr&gt;                &lt;int&gt;\n 1 Aberration               9\n 2 Beast                   84\n 3 Celestial               13\n 4 Construct               10\n 5 Dragon                  45\n 6 Elemental               17\n 7 Fey                     15\n 8 Fiend                   29\n 9 Giant                   10\n10 Humanoid                26\n11 Monstrosity             37\n12 Ooze                     4\n13 Plant                    6\n14 Swarm of Tiny Beasts     6\n15 Swarm of Tiny Undead     1\n16 Undead                  18\n\n\nHow many alignment are there?\n\nmonsters |&gt; count(alignment) \n\n# A tibble: 10 Ã— 2\n   alignment           n\n   &lt;chr&gt;           &lt;int&gt;\n 1 Chaotic Evil       45\n 2 Chaotic Good       11\n 3 Chaotic Neutral     7\n 4 Lawful Evil        35\n 5 Lawful Good        20\n 6 Lawful Neutral      3\n 7 Neutral            50\n 8 Neutral Evil       28\n 9 Neutral Good        6\n10 Unaligned         125"
  },
  {
    "objectID": "posts/2025-05-27/notebook.html#transform-data-for-plotting",
    "href": "posts/2025-05-27/notebook.html#transform-data-for-plotting",
    "title": "Dungeons and Dragons Monsters (2024)",
    "section": "3 Transform Data for Plotting",
    "text": "3 Transform Data for Plotting\n\n3.1 Mean Stats by Type\nAnd filter low count (&lt;10) types\n\ndata2plot &lt;- \n  monsters |&gt;\n  select(alignment, type, str, dex, con, int, wis, cha) |&gt;\n  filter(alignment != \"Unaligned\") |&gt;\n  mutate(\n    alignment = if_else(\n      alignment == 'Neutral',\n      true = 'Neutral Neutral',\n      false = alignment\n    )\n  ) |&gt;\n  group_by(type) |&gt;\n  filter(n() &gt; 10) |&gt;\n  summarize(across(where(is.numeric), mean, na.rm = TRUE)) |&gt;\n  ungroup()\n\n\n\n3.2 Transform axis\nThank you Gemini\n\n# Function to calculate (x,y) coordinates for radar chart axes\n# for a single set of data values (e.g., one row from your summary)\ncalculate_radar_coordinates &lt;- function(scaled_data_values) {\n  # scaled_data_values: A numeric vector of already scaled values,\n  # one for each axis. The length of this vector determines N.\n\n  N &lt;- length(scaled_data_values)\n  if (N &lt; 1) {\n    stop(\"scaled_data_values must have at least one value.\")\n  }\n\n  # Calculate angles for each axis (starting upwards, clockwise)\n  # Angles are in radians\n  angles &lt;- pi / 2 - ((0:(N - 1)) * (2 * pi / N))\n  # (0:(N-1)) is used because R is 1-indexed, but it's often easier\n  # to think of the first axis as index 0 for angle calculation.\n  # (j-1) in the formula becomes 0 for the first axis, 1 for the second, etc.\n\n  # Calculate Cartesian coordinates\n  x_coords &lt;- scaled_data_values * cos(angles)\n  y_coords &lt;- scaled_data_values * sin(angles)\n\n  # Return as a data frame or list\n  return(data.frame(\n    axis_index = 1:N,\n    angle_rad = angles,\n    angle_deg = angles * 180 / pi, # For easier understanding\n    scaled_radius = scaled_data_values,\n    x = x_coords,\n    y = y_coords\n  ))\n}\n\ndata2plot2 &lt;-\n  data2plot |&gt;\n  rowwise() |&gt;\n  mutate(\n    radar_coords = list(calculate_radar_coordinates(c_across(where(\n      is.numeric\n    ))))\n  ) |&gt;\n  ungroup() |&gt;\n  unnest(radar_coords) |&gt;\n  mutate(\n    attr = case_when(\n      axis_index == 1 ~ 'str',\n      axis_index == 2 ~ 'dex',\n      axis_index == 3 ~ 'con',\n      axis_index == 4 ~ 'int',\n      axis_index == 5 ~ 'wis',\n      axis_index == 6 ~ 'cha',\n    )\n  ) |&gt;\n  select(-c(str, dex, con, int, wis, cha)) |&gt;\n  mutate(x = round(x, digits = 3)) |&gt;\n  mutate(y = round(y, digits = 3)) |&gt;\n  left_join(\n    data2plot |&gt;\n      pivot_longer(cols = -type, names_to = 'attr', values_to = 'original'),\n    by = c('type','attr')\n  ) # Add back original value\n# separate(col = alignment, into = c('chaotic_lawful', 'good_evil'), sep = ' ', remove = FALSE) |&gt;\n# mutate(chaotic_lawful = factor(chaotic_lawful, levels = c(\"Chaotic\",\"Neutral\",\"Lawful\"))) |&gt;\n# mutate(good_evil = factor(good_evil, levels = c(\"Evil\",\"Neutral\",\"Good\")))"
  },
  {
    "objectID": "posts/2025-05-27/notebook.html#time-to-plot",
    "href": "posts/2025-05-27/notebook.html#time-to-plot",
    "title": "Dungeons and Dragons Monsters (2024)",
    "section": "4 Time to plot!",
    "text": "4 Time to plot!\n\n4.1 Before\n\ndata2plot2 |&gt;\n  group_by(attr) |&gt;\n  mutate(original_scaled = scale(original)) |&gt;\n  ungroup() |&gt;\n  ggplot(aes(x = x, y = y)) +\n  geom_polygon(\n    aes(group = type),\n    fill = \"#aebae0\",\n    color = '#aebae0',\n    alpha = .1\n  ) +\n  geom_point(color = '#aebae0', size = 3) +\n  geom_point(aes(color = original_scaled), size = 2) +\n  facet_wrap(~type, ncol = 4) +\n  theme_gray() +\n  coord_fixed(ratio = 1, expand = TRUE) +\n  scale_y_continuous(expand = c(0, 5, 0, 5)) +\n  scale_x_continuous(expand = c(0, 5, 0, 5)) +\n  labs(\n    title = 'Well, at least Dragons are clumsy',\n    subtitle = str_wrap('Stats distribuition for each monster type. Each point indicate scaled values for each stats. Darkblue being the high (above mean) stats and orange low (below the mean) stats.', width = 80),\n    caption = 'Tidytuesday 2025-05-27'\n  )\n\n\n\n\n\n\n\n\n\n\n4.2 After\n\n# Create my own axis (crying)\ncircle_data &lt;- tibble(\n  x_center = c(0, 0, 0, 0),\n  y_center = c(0, 0, 0, 0),\n  radius = c(5, 10, 15, 20)\n)\n\n\ndata2plot2 |&gt;\n  group_by(attr) |&gt;\n  mutate(original_scaled = scale(original)) |&gt;\n  ungroup() |&gt;\n  ggplot(aes(x = x, y = y)) +\n  geom_polygon(\n    aes(group = type),\n    fill = \"#aebae0\",\n    color = '#aebae0',\n    alpha = .2\n  ) +\n  ggforce::geom_circle(\n    aes(x0 = x_center, y0 = y_center, r = radius),\n    data = circle_data,\n    fill = \"transparent\",\n    color = '#ced5ea',\n    linewidth = .25,\n    inherit.aes = FALSE\n  ) +\n  shadowtext::geom_shadowtext(\n    data = subset(data2plot2 |&gt; distinct(type)),\n    aes(label = type),\n    x = 0,\n    y = 0,\n    family = 'Ubuntu',\n    bg.color = \"white\", # Border\n    bg.r = 0.2,\n    color = '#47506e',\n    size = 3\n  ) +\n  geom_point(color = '#aebae0', size = 3) +\n  geom_point(aes(color = original_scaled), size = 2) +\n  geom_text(\n    data = data2plot2 |&gt; mutate(y = if_else(y &gt; 0, y + 4, y - 4)),\n    aes(label = attr),\n    family = \"Ubuntu\",\n    size = 2.5,    \n    color = \"#aebae0\"\n  ) +\n  facet_wrap(~type, ncol = 4) +\n  theme_void() +\n  coord_fixed(ratio = 1, expand = TRUE) +\n  scale_y_continuous(expand = c(0, 5, 0, 5)) +\n  scale_x_continuous(expand = c(0, 5, 0, 5)) +\n  scale_color_gradientn(colours = MetBrewer::MetPalettes$Hiroshige[[1]]) +\n  theme(\n    strip.background = element_blank(),\n    strip.text = element_blank(),\n    text = element_text(family = \"Ubuntu\"),\n    plot.title.position = \"plot\",\n    plot.title = element_text(family = \"Ubuntu\", size = 14, face = 'bold'),\n    plot.caption = element_text(\n      size = 8,\n      color = 'grey60',\n      margin = margin(20, 0, 0, 0)\n    ),\n    plot.subtitle = element_text(\n      size = 9,\n      lineheight = 1.15,\n      margin = margin(5, 0, 15, 0)\n    )\n  ) +\n  guides(color = 'none', fill = 'none') +\n  labs(\n    title = 'Well, at least Dragons are clumsy',\n    subtitle = str_wrap('This chart displays the stats distribution for each monster type. Point colors correspond to scaled stat values, where dark blue signifies higher values (above the mean) and orange signifies lower values (below the mean)', width = 80),\n    caption = 'Tidytuesday 2025-05-27'\n  )\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nNote\n\n\n\nBe aware that radar charts are not really that useful. A better vizualization could be done with bar chart, but I never done a radar before, so I gave it a try (and probably my last, lol)"
  },
  {
    "objectID": "posts/2025-06-10/notebook.html",
    "href": "posts/2025-06-10/notebook.html",
    "title": "U.S. Judges and the historydata R package",
    "section": "",
    "text": "Note\n\n\n\n Check data in TidyTuesday GitHub repository.\n\n\nThis week weâ€™re exploring U. S. judge data from the {historydata} R package! This package is looking for a new maintainer. If you are interested in this dataset (and other datasets of historical information), please consider volunteering! Check out the rOpenSci Blog What Does It Mean to Maintain a Package? by MaÃ«lle Salmon for more information.\nNote: The package help for this dataset links to a particular PDF with some information about judgeships, but the actual source data can be found at Biographical Directory of Article III Federal Judges: Export on the Federal Judicial Center website.\n\nThis dataset contains information about the appointments and careers of all federal judges in United States history since 1789. It includes judges who â€œjudges presidentially appointed during good behavior who have served since 1789 on the U.S. District Courts, the U.S. Courts of Appeals, the Supreme Court of the United States, the former U.S. Circuit Courts, and the federal judiciaryâ€™s courts of special jurisdiction.â€ Some of the unnecessary information from the source has been excluded."
  },
  {
    "objectID": "posts/2025-06-10/notebook.html#about-the-data",
    "href": "posts/2025-06-10/notebook.html#about-the-data",
    "title": "U.S. Judges and the historydata R package",
    "section": "",
    "text": "Note\n\n\n\n Check data in TidyTuesday GitHub repository.\n\n\nThis week weâ€™re exploring U. S. judge data from the {historydata} R package! This package is looking for a new maintainer. If you are interested in this dataset (and other datasets of historical information), please consider volunteering! Check out the rOpenSci Blog What Does It Mean to Maintain a Package? by MaÃ«lle Salmon for more information.\nNote: The package help for this dataset links to a particular PDF with some information about judgeships, but the actual source data can be found at Biographical Directory of Article III Federal Judges: Export on the Federal Judicial Center website.\n\nThis dataset contains information about the appointments and careers of all federal judges in United States history since 1789. It includes judges who â€œjudges presidentially appointed during good behavior who have served since 1789 on the U.S. District Courts, the U.S. Courts of Appeals, the Supreme Court of the United States, the former U.S. Circuit Courts, and the federal judiciaryâ€™s courts of special jurisdiction.â€ Some of the unnecessary information from the source has been excluded."
  },
  {
    "objectID": "posts/2025-06-10/notebook.html#initializing",
    "href": "posts/2025-06-10/notebook.html#initializing",
    "title": "U.S. Judges and the historydata R package",
    "section": "1 Initializing",
    "text": "1 Initializing\n\n1.1 Load libraries\n\nlibrary(tidyverse)\nlibrary(glue)\nlibrary(scales)\nlibrary(showtext)\nlibrary(ggtext)\nlibrary(shadowtext)\n\nfont_add_google(\"Ubuntu\", \"Ubuntu\", regular.wt = 400, bold.wt = 700)\nshowtext_auto()\nshowtext_opts(dpi = 300)\n\n\n\n1.2 Set theme\n\ntheme_set(\n  theme_minimal() +\n    theme(\n      # axis.line.x.bottom = element_line(color = '#474747', linewidth = .3),\n      # axis.ticks.x= element_line(color = '#474747', linewidth = .3),\n      # axis.line.y.left = element_line(color = '#474747', linewidth = .3),\n      # axis.ticks.y= element_line(color = '#474747', linewidth = .3),\n      # # panel.grid = element_line(linewidth = .3, color = 'grey90'),\n      panel.grid.major = element_blank(),\n      panel.grid.minor = element_blank(),\n      axis.ticks.length = unit(-0.15, \"cm\"),\n      plot.background = element_blank(),\n      plot.title.position = \"plot\",\n      plot.title = element_text(family = \"Ubuntu\", size = 18, face = 'bold'),\n      plot.caption = element_text(\n        size = 8,\n        color = '#aebae0',\n        margin = margin(20, 0, 0, 0),\n        hjust = 0\n      ),\n      plot.subtitle = element_text(\n        size = 9,\n        lineheight = 1.15,\n        margin = margin(5, 0, 15, 0)\n      ),\n      axis.title.x = element_markdown(\n        family = \"Ubuntu\",\n        hjust = .5,\n        size = 8,\n        color = \"#374571\"\n      ),\n      axis.title.y = element_markdown(\n        family = \"Ubuntu\",\n        hjust = .5,\n        size = 8,\n        color = \"#374571\"\n      ),\n      axis.text = element_text(\n        family = \"Ubuntu\",\n        hjust = .5,\n        size = 8,\n        color = \"#374571\"\n      ),\n      legend.position = \"top\",\n      text = element_text(family = \"Ubuntu\", color = \"#374571\"),\n      plot.margin = margin(25, 25, 25, 25)\n    )\n)\n\n\n\n1.3 Load this weekâ€™s data\n\njudges_appointments &lt;- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/main/data/2025/2025-06-10/judges_appointments.csv')\njudges_people &lt;- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/main/data/2025/2025-06-10/judges_people.csv')"
  },
  {
    "objectID": "posts/2025-06-10/notebook.html#data-analysis",
    "href": "posts/2025-06-10/notebook.html#data-analysis",
    "title": "U.S. Judges and the historydata R package",
    "section": "2 Data analysis",
    "text": "2 Data analysis\n\nHow diverse is the judges?\n\njudges_people |&gt; count(gender, race) |&gt; pivot_wider(names_from = gender, values_from = n)\n\n# A tibble: 12 Ã— 3\n   race                     F     M\n   &lt;chr&gt;                &lt;int&gt; &lt;int&gt;\n 1 African Am./Hispanic     1     1\n 2 African American        51   150\n 3 American Indian          1     2\n 4 Asian American           9    22\n 5 Hispanic                29    87\n 6 Hispanic/Asian Am.       1    NA\n 7 White                  293  2871\n 8 White/Asian Am.          1    NA\n 9 &lt;NA&gt;                     3     6\n10 Hispanic/White          NA     1\n11 Pac. Isl./Asian Am.     NA     2\n12 Pac. Isl./White         NA     1\n\nmain_r &lt;- c(\"African American\", \"Asian American\", \"Hispanic\", \"White\")\n\nThere are three main race classifications: African American, Asian American, Hispanic and White; We can classify other as â€œMixedâ€, maybe.\n\n\nHow complete is the nomination and termination date?\n\njudges_appointments |&gt; count(is.na(judge_id), is.na(nomination_date), is.na(termination_date))\n\n# A tibble: 4 Ã— 4\n  `is.na(judge_id)` `is.na(nomination_date)` `is.na(termination_date)`     n\n  &lt;lgl&gt;             &lt;lgl&gt;                    &lt;lgl&gt;                     &lt;int&gt;\n1 FALSE             FALSE                    FALSE                      2675\n2 FALSE             FALSE                    TRUE                       1367\n3 FALSE             TRUE                     FALSE                       153\n4 FALSE             TRUE                     TRUE                          7\n\n\nAre NAs in termination_date judges with active appointments or is it missing data?\n\nmissing_termination_min &lt;-\n  judges_appointments |&gt;\n  filter(is.na(termination_date)) |&gt;\n  filter(!is.na(nomination_date)) |&gt;\n  pull(nomination_date) |&gt;\n  as.Date(format = \"%m/%d/%Y\") |&gt;\n  min()\n\nall_time_min &lt;- \n  judges_appointments |&gt;\n  filter(!is.na(nomination_date)) |&gt;\n  pull(nomination_date) |&gt;\n  as.Date(format = \"%m/%d/%Y\") |&gt;\n  min()\n\nThe all time earliest nomination is 1789-09-24 and the earliest missing termination date is 1962-06-23. So it would make sense it is still active appointments."
  },
  {
    "objectID": "posts/2025-06-10/notebook.html#transform-data-for-plotting",
    "href": "posts/2025-06-10/notebook.html#transform-data-for-plotting",
    "title": "U.S. Judges and the historydata R package",
    "section": "3 Transform Data for Plotting",
    "text": "3 Transform Data for Plotting\n\n3.1 Creating table of authors with most records for each language\n\nmax_date &lt;- \n  judges_appointments |&gt; \n  filter(!is.na(termination_date), !is.na(nomination_date)) |&gt;\n  rowwise() |&gt;\n  mutate(all_dates = list(list(nomination_date, termination_date))) |&gt;\n  ungroup() |&gt;\n  select(all_dates) |&gt;\n  unnest(all_dates) |&gt;\n  unnest(all_dates) |&gt;\n  pull(all_dates) |&gt;\n  as.Date(format = \"%m/%d/%Y\") |&gt;\n  max() |&gt; format(format = \"%d/%m/%Y\")\n\njudges_characteristics &lt;- \n  judges_people |&gt; \n  select(judge_id, gender, race) |&gt; \n  mutate(race = if_else(race %in% main_r, race, \"Mixed\"))\n\ndata2plot &lt;- \n  judges_appointments |&gt;\n  filter(!is.na(nomination_date)) |&gt;\n  mutate(termination_date = if_else(is.na(termination_date), max_date, termination_date)) |&gt;\n  mutate(nomination_date = str_replace(nomination_date, \"/../\", \"/01/\")) |&gt;\n  mutate(termination_date = str_replace(termination_date, \"/../\", \"/01/\")) |&gt;\n  select(judge_id, termination_date, nomination_date) |&gt;\n  mutate(nomination_date = as.Date(nomination_date, format = \"%m/%d/%Y\")) |&gt;\n  mutate(termination_date = as.Date(termination_date, format = \"%m/%d/%Y\")) |&gt;\n  rowwise() |&gt;\n  mutate(date = list(seq(nomination_date, termination_date, by = \"month\"))) |&gt;\n  unnest(date) |&gt;\n  ungroup() |&gt;\n  left_join(judges_characteristics, by = 'judge_id') |&gt;\n  group_by(date) |&gt;\n  count(gender, race)"
  },
  {
    "objectID": "posts/2025-06-10/notebook.html#time-to-plot",
    "href": "posts/2025-06-10/notebook.html#time-to-plot",
    "title": "U.S. Judges and the historydata R package",
    "section": "4 Time to plot!",
    "text": "4 Time to plot!\n\n4.1 Before\n\ndata2plot |&gt; \n  ggplot(aes(x = date, y = n)) +\n  geom_col(aes(fill = str_c(gender, race, sep = ' '))) +\n  theme_gray() +\n  labs(\n    title = 'Judges Diversity',\n    subtitle = '-')\n\n\n\n\n\n\n\n\n\nmy_color_pallet &lt;- c(\n  \"African American\" = \"#CF251A\",\n  \"Asian American\" = \"#F09A00\",\n  \"Hispanic\" = \"#1F7611\",\n  \"White\" = \"#337EE4\",\n  \"Mixed\" = \"#303381\"\n)\n\ndata2plot2 &lt;-\n  data2plot |&gt;\n  mutate(n = if_else(gender == 'F', -n, n)) |&gt;\n  group_by(gender, race) |&gt;\n  arrange(gender, race, date) |&gt;\n  mutate(\n    mean_n = zoo::rollmeanr(n, k = 12, fill = NA) # k=3 for 3 periods\n  ) |&gt;\n  ungroup()\n\np1 &lt;-\n  data2plot2 |&gt;\n  ggplot(aes(x = date, y = mean_n)) +\n  annotate(\n    geom = 'text',\n    x = as.Date('1770-09-01'),\n    y = 500,\n    label = 'Male Judges â†’',\n    hjust = 0.5,\n    vjust = 0.5,\n    size = 3,\n    color = \"#374571\",\n    angle = 90,\n  ) +\n  annotate(\n    geom = 'text',\n    x = as.Date('1770-09-01'),\n    y = -500,\n    label = 'â† Female Judges',\n    hjust = 0.5,\n    vjust = 0.5,\n    size = 3,\n    color = \"#374571\",\n    angle = 90,\n  ) +\n  geom_text(\n    data = tibble(guide_value = seq(-1000, 1000, 250)),\n    x = as.Date('1776-09-01'),\n    aes(label = abs(guide_value), y = guide_value),\n    hjust = 0,\n    vjust = 0.5,\n    size = 2.5,\n    color = \"#374571\"\n  ) +\n  stat_smooth(\n    aes(fill = race, group = str_c(race, gender)),\n    se = FALSE,\n    geom = 'area',\n    alpha = .2\n  ) +\n  geom_smooth(\n    aes(group = str_c(race, gender)),\n    se = FALSE,\n    color = 'white',\n    span = .2,\n    linewidth = 1.5\n  ) +\n  geom_smooth(\n    aes(color = race, group = str_c(race, gender)),\n    se = FALSE,\n    span = .2,\n    linewidth = 0.5\n  ) +\n  scale_x_date(expand = c(0.05, 0, 0, 0)) +\n  scale_y_continuous(expand = c(0.05, 0, 0.05, 0), limits = c(-1000, 1000)) +\n  annotate(\n    geom = 'segment',\n    y = 0,\n    x = min(data2plot2$date),\n    xend = max(data2plot2$date),\n    color = 'white',\n    linewidth = 1.5\n  ) +\n  annotate(\n    geom = 'segment',\n    y = 0,\n    x = min(data2plot2$date),\n    xend = max(data2plot2$date),\n    color = '#374571',\n    linewidth = 0.25,\n    linetype = '11'\n  ) +\n  # theme(legend.position = c(0.05, 0.99), legend.justification = c(0, 1)) +\n  scale_color_manual(values = my_color_pallet) +\n  scale_fill_manual(values = my_color_pallet) +\n  labs(x = NULL, y = \"Number of judges\", color = NULL, fill = NULL)\n\np2 &lt;- p1 +\n  coord_cartesian(\n    expand = FALSE,\n    ylim = c(-100, 100),\n    xlim = c(as.Date(\"1950-01-01\"), as.Date(\"2014-10-01\"))\n  ) +\n  theme(\n    plot.margin = margin(0, 0, 0, 0),\n    legend.position = 'none',\n    panel.border = element_rect(color = '#aebae0', linewidth = .5, fill = NA)\n  ) +\n  annotate(\n    geom = 'text',\n    label = '2014',\n    x = as.Date(\"2014-01-01\"),\n    y = -95,\n    hjust = 1,\n    vjust = 0,\n    size = 2.5,\n    color = \"#374571\"\n  ) +\n  annotate(\n    geom = 'text',\n    label = '1950',\n    x = as.Date(\"1950-09-01\"),\n    y = -95,\n    hjust = 0,\n    vjust = 0,\n    size = 2.5,\n    color = \"#374571\"\n  ) +\n  labs(x = NULL, y = NULL) +\n  theme(axis.text.x = element_blank()) +\n  scale_y_continuous(label = abs)\n\np1 +\n  theme(axis.text.y = element_blank(), axis.title.y = element_blank()) +\nannotation_custom(\n  xmin = as.Date(\"1825-01-01\"),\n  xmax = as.Date(\"1900-10-01\"),\n  ymin = 300,\n  ymax = 1000,\n  grob = ggplotGrob(p2)\n) +\n  labs(\n    title = \"US Judge Appointments\",\n    subtitle = \"Number of judges by race and gender\",\n    caption = str_wrap(\"NOTE This visualization offers a preliminary look at the data and may not capture the full complexity of the underlying reality.@SOURCE #Tidytuesday 2025-06-10@GITHUB barreiro-r\", width = 110) |&gt; str_replace_all(\"@\",\"\\n\")\n  )\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nNote\n\n\n\nI tryed to use ggforce::zoom_panel() and {ggmagnify} but both didnâ€™t work."
  }
]